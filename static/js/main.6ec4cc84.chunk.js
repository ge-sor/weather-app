(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{18:function(t,e,n){},24:function(t,e,n){},25:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),o=n(6),i=n.n(o),r=(n(18),n(2)),s=n(3),l="ADD_ITEM",u="REMOVE_ITEM",d=function(t){return{type:l,payload:t}},p=n(26),j=n(1);function b(t){var e=t.isOpen,n=t.onClose;return Object(j.jsx)("section",{className:"popup ".concat(e&&"popup_opened"),children:Object(j.jsxs)("div",{className:"popup__container",children:[Object(j.jsx)("h2",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0433\u043e\u0440\u043e\u0434\u0430"}),Object(j.jsx)("button",{type:"button",className:"button popup__close-btn",onClick:n})]})})}var m="https://api.openweathermap.org/data/2.5",h=function(t){return t.ok?t.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(t.status))},O="e8589dd59b877616c63ff3a5270d69ff";function f(t){var e=t.onClose,n=t.card,a=Object(c.useState)({}),o=Object(r.a)(a,2),i=o[0],s=o[1];return Object(c.useEffect)((function(){var t,e;n&&(t=n.coord.lon,e=n.coord.lat,fetch("".concat(m,"/onecall?lat=").concat(e,"&lon=").concat(t,"&exclude=hourly,minutely,current&appid=").concat(O,"&units=metric&lang=ru")).then(h)).then((function(t){var e={temp:"".concat(Math.floor(t.daily[1].temp.day),"\xb0C"),icon:"http://openweathermap.org/img/wn/".concat(t.daily[1].weather[0].icon,".png"),weather:t.daily[1].weather.description},n=new Date(1e3*t.daily[0].sunrise),c=new Date(1e3*t.daily[0].sunset),a=new Date(1e3*t.daily[1].sunrise),o=new Date(1e3*t.daily[1].sunset);e.dusk=c.toLocaleTimeString([],{timeZone:t.timeZone,hour:"2-digit",minute:"2-digit"}),e.dawn=n.toLocaleTimeString([],{timeZone:t.timeZone,hour:"2-digit",minute:"2-digit"}),e.duskTomorrow=o.toLocaleTimeString([],{timeZone:t.timeZone,hour:"2-digit",minute:"2-digit"}),e.dawnTomorrow=a.toLocaleTimeString([],{timeZone:t.timeZone,hour:"2-digit",minute:"2-digit"}),s(e)}))}),[n]),Object(j.jsx)("section",{className:"popup ".concat(n&&"popup_opened"),children:Object(j.jsxs)("div",{className:"popup__container popup__container_place",children:[Object(j.jsx)("h2",{className:"card__text",children:null===n||void 0===n?void 0:n.title}),Object(j.jsx)("h3",{children:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"}),Object(j.jsxs)("div",{className:"card__container",children:[Object(j.jsx)("p",{children:null===n||void 0===n?void 0:n.temp}),Object(j.jsx)("img",{className:"card__image",src:null===n||void 0===n?void 0:n.icon,alt:null===n||void 0===n?void 0:n.weather}),Object(j.jsxs)("p",{className:"card__time-text",children:["\u0420\u0430\u0441\u0441\u0432\u0435\u0442: ",i.dawn]}),Object(j.jsxs)("p",{className:"card__time-text",children:["\u0417\u0430\u043a\u0430\u0442: ",i.dusk]})]}),Object(j.jsx)("h3",{children:"\u0417\u0430\u0432\u0442\u0440\u0430"}),Object(j.jsxs)("div",{className:"card__container",children:[Object(j.jsx)("p",{children:i.temp}),Object(j.jsx)("img",{className:"card__image",src:i.icon,alt:i.weather}),Object(j.jsxs)("p",{className:"card__time-text",children:["\u0420\u0430\u0441\u0441\u0432\u0435\u0442: ",i.dawnTomorrow]}),Object(j.jsxs)("p",{className:"card__time-text",children:["\u0417\u0430\u043a\u0430\u0442: ",i.duskTomorrow]})]}),Object(j.jsx)("button",{type:"button",className:"button popup__close-btn",onClick:e})]})})}var g=Object(s.b)((function(t){return{cards:t.items}}),(function(t){return{addCard:function(e){return t(d(e))}}}))((function(t){var e=t.addCard,n=t.isOpen,a=t.onClose,o=t.error,i=Object(c.useState)({title:""}),s=Object(r.a)(i,2),l=s[0],u=s[1];return Object(c.useEffect)((function(){n&&u({title:""})}),[n]),Object(j.jsx)("section",{className:"popup ".concat(n&&"popup_opened"),children:Object(j.jsxs)("div",{className:"popup__container",children:[Object(j.jsx)("h2",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0433\u043e\u0440\u043e\u0434"}),Object(j.jsxs)("form",{onSubmit:function(t){var n;t.preventDefault(),(n=l.title,fetch("".concat(m,"/weather?q=").concat(n,"&appid=").concat(O,"&lang=ru&units=metric")).then(h)).then((function(t){console.log(t);var n={id:Object(p.a)(),title:t.name,temp:"".concat(Math.floor(t.main.temp),"\xb0C"),icon:"http://openweathermap.org/img/wn/".concat(t.weather[0].icon,".png"),coord:{lon:t.coord.lon,lat:t.coord.lat}};e(n),console.log(n),a()})).catch((function(t){console.log(t),a(),o()}))},children:[Object(j.jsx)("input",{type:"text",required:!0,minLength:"3",maxLength:"40",value:l.title||"",onChange:function(t){u({title:t.target.value})},className:"form__input"}),Object(j.jsx)("button",{type:"submit",className:"button submit-btn"})]}),Object(j.jsx)("button",{type:"button",className:"button popup__close-btn",onClick:a})]})})}));var x=Object(s.b)(null,(function(t){return{removeCard:function(e){return t({type:u,payload:{id:e}})}}}))((function(t){var e=t.card,n=t.removeCard,c=t.onCardClick;return Object(j.jsxs)("div",{className:"card__container",children:[Object(j.jsxs)("li",{className:"card",onClick:function(){c(e)},children:[Object(j.jsx)("h2",{className:"card__text",children:e.title}),Object(j.jsx)("p",{children:e.temp}),Object(j.jsx)("img",{className:"card__image",src:e.icon,alt:e.weather})]}),Object(j.jsx)("button",{className:"\u041c\u043e\u0451 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"!==e.title?"button delete-btn":"button_inactive",type:"button",onClick:function(){return t=e.id,void n(t);var t}})]})})),_=(n(24),Object(s.b)((function(t){return{cards:t.items}}),(function(t){return{addCard:function(e){return t(d(e))}}}))((function(t){var e=t.cards,n=t.addCard,a=Object(c.useState)(null),o=Object(r.a)(a,2),i=o[0],s=o[1],l=Object(c.useState)(!1),u=Object(r.a)(l,2),d=u[0],_=u[1],v=Object(c.useState)(!1),w=Object(r.a)(v,2),C=w[0],N=w[1],y=Object(c.useState)(!1),k=Object(r.a)(y,2),S=k[0],T=k[1];function D(t){s(t)}function E(){_(!1),N(!1),T(!1),s(null)}return Object(c.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(t){var e,c;(e=t.coords.longitude,c=t.coords.latitude,fetch("".concat(m,"/weather?lat=").concat(c,"&lon=").concat(e,"&appid=").concat(O,"&lang=ru&units=metric")).then(h)).then((function(t){var e={id:Object(p.a)(),title:"\u041c\u043e\u0451 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435",temp:"".concat(Math.floor(t.main.temp),"\xb0C"),icon:"http://openweathermap.org/img/wn/".concat(t.weather[0].icon,".png"),weather:t.weather[0].description,coord:{lon:t.coord.lon,lat:t.coord.lat}};n(e)})).catch((function(t){_(!0),console.log(t)}))}))}),[n]),Object(j.jsxs)("div",{className:"page",children:[Object(j.jsx)("ul",{className:"cards__list",children:e.map((function(t){return Object(j.jsx)(x,{className:"card",card:t,onCardClick:D},t.id)}))}),Object(j.jsx)("button",{className:"button new-place-btn",onClick:function(){T(!0)}}),Object(j.jsx)(b,{isOpen:d,onClose:E}),Object(j.jsx)(f,{card:i,isOpen:C,onClose:E}),Object(j.jsx)(g,{isOpen:S,onClose:E,error:function(){_(!0)}})]})}))),v=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),c(t),a(t),o(t),i(t)}))},w=n(12),C=n(11),N=n(5),y={items:[]};var k=Object(w.a)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return Object(N.a)(Object(N.a)({},t),{},{items:[].concat(Object(C.a)(t.items),[e.payload])});case u:return Object(N.a)(Object(N.a)({},t),{},{items:t.items.filter((function(t){return t.id!==e.payload.id}))});default:return t}}));i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(s.a,{store:k,children:Object(j.jsx)(_,{})})}),document.getElementById("root")),v()}},[[25,1,2]]]);
//# sourceMappingURL=main.6ec4cc84.chunk.js.map